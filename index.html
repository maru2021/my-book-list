<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マイ・ブックカタログ</title>
    <style>
        /* サイト全体の背景と余白 */
        body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f0f2f5; margin: 0; padding: 0; color: #333; }
        
        /* 上部のヘッダー部分 */
        .site-header { background: #fff; text-align: center; padding: 40px 20px; border-bottom: 1px solid #ddd; margin-bottom: 30px; }
        .site-header img { max-width: 120px; border-radius: 50%; margin-bottom: 15px; } /* ロゴ用 */
        .site-header h1 { margin: 0; font-size: 28px; color: #222; }
        .site-header p { color: #666; margin-top: 10px; }

        /* カードが並ぶエリア */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; padding-bottom: 50px; }
        
        /* 商品カードのデザイン */
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); display: flex; flex-direction: column; padding: 20px; }
        .card img { width: 100%; height: 200px; object-fit: contain; background: #f9f9f9; margin-bottom: 15px; }
        .card h3 { font-size: 17px; margin: 0 0 10px 0; height: 2.8em; overflow: hidden; line-height: 1.4; color: #111; }
        
        /* コメント欄（150字程度） */
        .comment { font-size: 14px; color: #555; text-align: left; line-height: 1.6; margin-bottom: 15px; flex-grow: 1; }
        
        /* Kindle Unlimited バッジ */
        .badge { color: #c40000; font-weight: bold; font-size: 12px; margin-bottom: 10px; display: block; }
        
        /* Amazonボタン */
        .btn { background: #ff9900; color: white; text-decoration: none; padding: 12px; border-radius: 6px; font-weight: bold; transition: 0.2s; text-align: center; }
        .btn:hover { background: #e68a00; }

        @media (max-width: 480px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <header class="site-header">
        <img src="logo.png" alt="ロゴ">
        <h1>読み放題で見つかる！厳選おすすめ本カタログ</h1>
        <p>Kindle Unlimitedで読める良書を毎日更新中</p>
    </header>

    <div class="container">
        <div id="book-grid" class="grid">
            </div>
    </div>

    <script>
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR5ymaarqn9uS9u-UwrEYrQupWrgQdYG13Iqom8ZvKMzkITaXo3GvDPReNPBe2yCfOyho7iw3jb3NIZ/pub?gid=0&single=true&output=csv
';

        async function loadBooks() {
            try {
                const response = await fetch(csvUrl);
                const data = await response.text();
                const rows = data.split(/\r?\n/).slice(1); 
                const grid = document.getElementById('book-grid');
                grid.innerHTML = '';

                rows.forEach(row => {
                    // カンマで区切る（引用符対応）
                    const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    
                    if (cols.length >= 4) {
                        const title = cols[0].replace(/"/g, "");
                        const imageUrl = cols[1].replace(/"/g, "");
                        const amazonUrl = cols[2].replace(/"/g, "");
                        const comment = cols[3].replace(/"/g, ""); // D列のコメント

                        grid.innerHTML += `
                            <div class="card">
                                <img src="${imageUrl}" alt="${title}">
                                <h3>${title}</h3>
                                <span class="badge">Kindle Unlimited 0円</span>
                                <div class="comment">${comment}</div>
                                <a href="${amazonUrl}" target="_blank" class="btn">Amazonで詳細を見る</a>
                            </div>
                        `;
                    }
                });
            } catch (e) {
                console.error("データの読み込みに失敗しました", e);
            }
        }
        loadBooks();
    </script>
</body>
</html>
